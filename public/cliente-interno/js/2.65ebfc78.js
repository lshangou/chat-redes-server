(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"39a5":function(e,t,s){},"8b24":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("q-page-sticky",{attrs:{position:"bottom-left",offset:[18,200]}},[s("q-btn",{staticClass:"rotate-270",attrs:{round:"",color:"accent",icon:"arrow_back"},on:{click:function(t){return e.scrollBottom()}}})],1),s("q-page-sticky",{attrs:{position:"top-left",offset:[18,18]}},[s("q-btn",{attrs:{round:"",color:"red-5",icon:"delete"},on:{click:function(t){e.deleteAllPrompt=!0}}})],1),s("div",{staticClass:"q-px-md",attrs:{id:"messages"}},[e._l(e.messages,(function(t){return s("div",{key:t.time},[s("q-chat-message",{staticClass:"message-text",attrs:{sent:t.name==e.name,name:t.name,text:[t.msg],avatar:t.image,stamp:new Date(t.time).getHours()+":"+new Date(t.time).getMinutes().toString()}}),t.name==e.name?s("q-btn",{staticClass:"delete-button",attrs:{size:"sm",dense:""},on:{click:function(s){return e.deleteMessage(t.time,!1)}}},[e._v("Deletar")]):e._e()],1)})),s("p",{staticClass:"text-center text-grey"},[e._v("Sem mais conversas para mostrar")])],2),s("div",{staticClass:"q-pa-sm fixed-bottom shadow-3 bg-white",attrs:{id:"form"}},[s("q-input",{staticClass:"full-width",attrs:{label:"Mensagem (como "+e.name+")..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enviarMensagem()}},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{staticClass:"cursor-pointer",attrs:{color:"accent",label:"Enviar"},on:{click:function(t){return e.enviarMensagem()}}})]},proxy:!0}]),model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),s("div",{staticClass:"q-pa-sm q-mt-md q-mb-md flex justify-between shadow-1 rounded-borders"},[s("div",[s("p",{staticClass:"q-mb-none"},[e._v("Conectado como:")]),s("q-chip",[s("q-avatar",{attrs:{size:"md"}},[s("img",{attrs:{src:e.image}})]),e._v("\n          "+e._s(e.name)+"\n        ")],1)],1),s("q-btn",{attrs:{size:"sm",color:"red-5"},on:{click:function(t){return e.disconnect()}}},[e._v("Desconectar")])],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:e.userPromptModal,callback:function(t){e.userPromptModal=t},expression:"userPromptModal"}},[s("q-card",{staticStyle:{"min-width":"350px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v("Informações de Usuário")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{label:"Nome",dense:"",autofocus:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),s("q-card-section",{staticClass:"q-pt-none"},[s("q-file",{attrs:{type:"file",name:"myfile",id:"myfile",label:"Selecione um avatar..."},model:{value:e.fileImage,callback:function(t){e.fileImage=t},expression:"fileImage"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Concluído"},on:{click:function(t){return e.setUserImage()}}})],1)],1)],1),s("q-dialog",{attrs:{persistent:""},model:{value:e.deleteAllPrompt,callback:function(t){e.deleteAllPrompt=t},expression:"deleteAllPrompt"}},[s("q-card",{staticStyle:{"min-width":"350px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v("Deseja deletar TODAS as mensagens?")])]),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Não"}}),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Sim"},on:{click:function(t){return e.deleteAll()}}})],1)],1)],1)],1)},o=[];const i=e=>new Promise(((t,s)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>s(e)}));var l={name:"PageIndex",data(){return{deleteAllPrompt:!1,userPromptModal:!1,fileImage:null,socket:null,name:"",image:n,msg:"",time:"",messages:[]}},created(){if(this.$q.localStorage.getItem("userName")?(this.name=this.$q.localStorage.getItem("userName"),this.image=this.$q.localStorage.getItem("userImage")):this.userPromptModal=!0,this.$q.localStorage.getItem("messageList")){let e=this.$q.localStorage.getItem("messageList");e.forEach((e=>{this.messages.push(e)}))}let e=this;this.socket=this.$io("http://localhost:7777"),this.socket.on("chat message",(function(t){if(e.$q.localStorage.getItem("messageList")){let s=e.$q.localStorage.getItem("messageList");s.push(t),e.$q.localStorage.set("messageList",s)}else e.$q.localStorage.set("messageList",[t]);e.messages.push(t),e.scrollBottom()})),this.socket.on("delete message",(function(t){e.deleteMessage(t,!0)}))},methods:{disconnect(){this.$q.localStorage.set("userName",""),this.$q.localStorage.set("userImage",""),this.userPromptModal=!0},enviarMensagem(){""!=this.msg&&""!=this.name&&(this.socket.emit("chat message",{name:this.name,msg:this.msg,image:this.image}),this.msg="")},setUserImage:async function(){""==this.name&&(this.name="Nome não definido"),this.fileImage&&(this.image=await i(this.fileImage)),this.$q.localStorage.set("userName",this.name),this.$q.localStorage.set("userImage",this.image)},scrollBottom(){window.scrollTo(0,document.getElementById("messages").scrollHeight)},deleteAll(){this.$q.localStorage.set("messageList",[]),this.messages=[]},deleteMessage(e,t){0==t&&this.socket.emit("delete message",e),console.log(e);let s=this.$q.localStorage.getItem("messageList"),a=[];e&&(s.forEach((t=>{t.time!=e&&a.push(t)})),this.messages=[],a.forEach((e=>{this.messages.push(e)})),this.$q.localStorage.set("messageList",a))}},mounted(){this.scrollBottom()}};const n="data:image/png;base64,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";var c=l,r=(s("c9bf"),s("2877")),m=s("9989"),g=s("de5e"),A=s("9c40"),u=s("8169"),d=s("27f9"),h=s("b047"),p=s("cb32"),f=s("24e8"),w=s("f09f"),C=s("a370"),q=s("7d53"),Q=s("4b7e"),b=s("7f67"),k=s("eebe"),v=s.n(k),D=Object(r["a"])(c,a,o,!1,null,"5bf8d2c4",null);t["default"]=D.exports;v()(D,"components",{QPage:m["a"],QPageSticky:g["a"],QBtn:A["a"],QChatMessage:u["a"],QInput:d["a"],QChip:h["a"],QAvatar:p["a"],QDialog:f["a"],QCard:w["a"],QCardSection:C["a"],QFile:q["a"],QCardActions:Q["a"]}),v()(D,"directives",{ClosePopup:b["a"]})},c9bf:function(e,t,s){"use strict";s("39a5")}}]);